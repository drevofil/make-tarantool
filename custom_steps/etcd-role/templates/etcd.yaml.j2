name: "{{ etcd_name }}"
data-dir: "{{ etcd_data_dir }}"
listen-peer-urls: "{{ etcd_listen_peer_urls }}"
listen-client-urls: "{{ etcd_listen_client_urls }}"
advertise-client-urls: "{{ etcd_advertise_client_urls }}"
initial-advertise-peer-urls: "{{ etcd_advertise_peer_urls }}"
initial-cluster: "{{ etcd_initial_cluster }}"
initial-cluster-state: "{{ etcd_initial_cluster_state }}"
initial-cluster-token: "{{ etcd_initial_cluster_token }}"

{% if etcd_metrics_urls is defined %}
listen-metrics-urls: "{{ etcd_metrics_urls }}"
{% endif %}

{% if etcd_tls_enabled %}
  {% if etcd_tls_mode == 'provided' %}
client-transport-security:
  cert-file: "{{ etcd_tls_cert }}"
  key-file: "{{ etcd_tls_key }}"
  trusted-ca-file: "{{ etcd_tls_ca_cert }}"
  client-cert-auth: true
peer-transport-security:
  cert-file: "{{ etcd_tls_cert }}"
  key-file: "{{ etcd_tls_key }}"
  trusted-ca-file: "{{ etcd_tls_ca_cert }}"
  peer-client-cert-auth: true
  {% else %}

client-transport-security:
  auto-tls: {{ etcd_auto_tls | lower }}
peer-transport-security:
  auto-tls: {{ etcd_peer_auto_tls | lower }}
  {% endif %}
{% endif %}

# Extra configuration
{% for key, value in etcd_extra_config.items() %}
{{ key }}: {{ value | to_yaml }}
{% endfor %}